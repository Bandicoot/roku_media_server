<html>
<head>
	<script src="jquery.js" type="text/javascript"></script>
	<script src="parseuri.js" type="text/javascript"></script>
	<script src="jplayer.js" type="text/javascript"></script>
	<script>
		$(document).ready(function() {
			var populate = function(container, url) {
				container.hide("fast");

				$.get(url, function(xml) {
					var new_html = $("item", xml).map(function() {
						var url = parseUri($("link", this).text()).relative;
						var type = $("filetype", this).text() || "none";
						return '<a href="' + url + '" type="' + type + '">' + $("title", this).text() + '</a>';
					}).get().join('<br/>');

					container.html(new_html);
					container.show("fast");
				});
			};

			$("#jplayer").jPlayer({
				nativeSupport: true, oggSupport: false, customCssIds: false, swfPath: "."
			})
			
			var target = $("#target");
			target.delegate("a", "click", function() {
				if(this.type == "none") {
					populate(target, this.href);
					return false;
				} else {
					$("#jplayer").jPlayer("setFile", this.href)
					$("#jplayer").jPlayer("play");
					return false;
				}
			});

			populate(target, "/feed");

			// take us back to the main when title is clicked
			$(".title").click(function() {
				populate(target, "/feed");
			});
		});
	</script>

	<title>Demo Page</title>
</head>

<style type='text/css'>
	.title {
		background-color: #aaffff;
		color: #333333;
		width: 60%;
		height: 25px;
		border-style: solid;
		border-width: 3px;
		text-align: center;
	}

	.title :hover {
		background-color: #66ff66;
	}

	.block {
		background-color: #cccccc;
		color: #333333;
		width: 80%;
		background-image: url('/media?key=client&name=images/media_wide.jpg');
		background-repeat:no-repeat;
	}
</style>

<body>
	<div class="block">
		<div class="title">My Music</div>
		<div id="target">
			Loading data...
		</div>
		<div id="jplayer"></div>
    <div id="controls">
      <ul id="player_controls">
        <li id="jplayer_play">play</li>
        <li id="jplayer_pause">pause</li>
        <li id="jplayer_stop">stop</li>
        <li id="jplayer_volume_min">min volume</li>
        <li id="jplayer_volume_max">max volume</li>
      </ul>
    </div>

	</div>
</body>

</html>
